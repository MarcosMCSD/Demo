CREATE TABLE `villa_mouzinho`.`attributes` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `NAME` VARCHAR(250) NOT NULL,
  PRIMARY KEY (`ID`));

CREATE TABLE `villa_mouzinho`.`attributes_values` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `ATTRIBUTE_ID` INT NOT NULL,
  `VALUE` VARCHAR(250) NOT NULL,
  `DESCRIPTION` VARCHAR(500) NULL,
  PRIMARY KEY (`ID`));

ALTER TABLE `villa_mouzinho`.`attributes_values` 
ADD INDEX `FK_ATTRIBUTE_VALUE_idx` (`ATTRIBUTE_ID` ASC);
ALTER TABLE `villa_mouzinho`.`attributes_values` 
ADD CONSTRAINT `FK_ATTRIBUTE_VALUE`
  FOREIGN KEY (`ATTRIBUTE_ID`)
  REFERENCES `villa_mouzinho`.`attributes` (`ID`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;

  ////////////////////////
  CREATE TABLE `villa_mouzinho`.`cms_page_header` (
  `IID` INT NOT NULL AUTO_INCREMENT,
  `ID` VARCHAR(45) NOT NULL,
  `STATUS` INT NOT NULL,
  `TYPE` INT NOT NULL,
  `TITLE` VARCHAR(500) NOT NULL,
  `URL` VARCHAR(1000) NOT NULL,
  `PARENT_ID` INT NULL,
  `PARENT_PATH` VARCHAR(1000) NULL,
  `ACTIVE` BIT NOT NULL,
  `CREATION_DATE` DATETIME NOT NULL,
  PRIMARY KEY (`IID`));

  CREATE TABLE `villa_mouzinho`.`cms_page_module_mapping` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `PAGE_HEADER_ID` VARCHAR(45) NOT NULL,
  `PAGE_HEADER_IID` INT NOT NULL,
  `TYPE` VARCHAR(45) NOT NULL,
  `MODULE_ID` INT NOT NULL,
  `ORDER` INT NOT NULL,
  PRIMARY KEY (`ID`));

  CREATE TABLE `villa_mouzinho`.`cms_page_module_content` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `TITLE` VARCHAR(500) NOT NULL,
  `DESCRIPTION` VARCHAR(5000) NOT NULL,
  `IMAGE` BLOB NULL,
  PRIMARY KEY (`ID`));

  ALTER TABLE `villa_mouzinho`.`cms_page_header` 
CHANGE COLUMN `PARENT_ID` `PARENT_ID` VARCHAR(500) NULL DEFAULT NULL ;

ALTER TABLE `villa_mouzinho`.`cms_page_module_content` 
ADD COLUMN `EXTENSION` VARCHAR(45) NULL AFTER `IMAGE`;

ALTER TABLE `villa_mouzinho`.`cms_page_module_content` 
ADD COLUMN `IMAGE_NAME` VARCHAR(250) NULL AFTER `EXTENSION`;
